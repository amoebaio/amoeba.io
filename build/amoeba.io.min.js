/*! amoeba.io 0.0.12 */
!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){var d=a("chaining-tool");ClientHolder=function(a,b){this.use=b,this.client=a,this.handlers_list={}},ClientHolder.prototype.handler=function(a,b){this.handlers_list[a]||(this.handlers_list[a]=[]),this.handlers_list[a].push(b)},ClientHolder.prototype.handlers=function(a){return this.handlers_list[a]||[]},ClientHolder.prototype.invoke=function(a,b,c){var e={request:{use:this.use,method:a,params:b},response:{error:null,result:null}},f=this,g=new d(f.handlers("before_invoke"));g.start(e,function(a){f.client.invoke(a.request.use,a.request.method,a.request.params,function(b,e){a.response.error=b,a.response.result=e;var g=new d(f.handlers("after_invoke"));g.start(a,function(a){c(a.response.error,a.response.result)},function(a){c(a.response.error,a.response.result)})})},function(a){c(a.response.error,a.response.result)})},ClientHolder.prototype.on=function(a,b,c){this.client.on(this.use,a,b,c)},ClientHolder.prototype.removeListener=function(a,b,c){this.client.removeListener(this.use,a,b,c)},b.exports=c=ClientHolder},{"chaining-tool":3}],2:[function(a,b,c){var d=a("./amoeba-client-holder");Amoeba=function(){this.servers=[],this.objects={}},Amoeba.prototype.use=function(){if(1==arguments.length){if(this.objects[arguments[0]])return this.objects[arguments[0]];throw new Error("Service '"+arguments[0]+"' not found")}if(2==arguments.length){var a=new d(arguments[1],arguments[0]);return this.objects[arguments[0]]=a,a}},Amoeba.prototype.server=function(a){a.amoeba(this),this.servers.push(a)},b.exports=c=Amoeba},{"./amoeba-client-holder":1}],3:[function(a,b){b.exports=a("./lib/chain.js")},{"./lib/chain.js":4}],4:[function(a,b,c){var d=function(a){this.handlers=a||[],this.oncomplete=null,this.onbreak=null};d.prototype.add=function(a){this.handlers.push(a)},d.prototype.start=function(a,b,c){this.oncomplete=b,this.onbreak=c,this.next(0,a)()},d.prototype.next=function(a,b){var c=this;return function(){0===arguments.length||1===arguments.length&&arguments[0]===!0?c.handlers[a]?c.handlers[a](b,c.next(a+1,b)):c.oncomplete(b):c.onbreak&&c.onbreak(b)}},b.exports=c=d},{}]},{},[1,2]);